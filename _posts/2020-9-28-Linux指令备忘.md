---
layout: post
title: Linux指令备忘
categories: [Linux]
---

# 指令解析

## curl

`-o` 将服务器的返回保存为文件

> -o, --output <file> Write to file instead of stdout

获取数据并保存到文件: `curl -o <file> <url>` 或 `curl <url> > <file>`

## grep

`-v` 反选

`grep -v grep`

## awk

`awk '{print $1 $3}' [file]` 打印文件中每行的第一和第三个字符串（字符串以空格为区分）

## xargs

> xargs 是一个强有力的命令，它能够捕获一个命令的输出，然后传递给另外一个命令。

`ps aux | grep <process name> | grep -v grep | awk '{print $2}' | xargs kill -9`

# 常见操作

## 获取并杀死某个进程

`ps aux | grep <process name> | grep -v grep | awk '{print $2}' | xargs kill -9`

## 后台运行：

`nohup <process name> > /dev/null 2>&1 &`

1. `nohup` 不中断
2. `<process name>` 要运行的程序
3. `> /dev/null` 标准输出重定向到/dev/null(丢掉 销毁)
4. `2>&1` 标准错误(stderr)重定向到标准输出(stdout), 递归地重定向到/dev/null
   * `0`  stdin   标准输入
   * `1`  stdout 标准输出
   * `2`  stderr  标准错误
5. `&` 后台运行

## Shell管理

查看已有shell `cat /etc/shells`

查看当前shell `echo $SHELL`

更改当前用户的默认shell `chsh -s /bin/bash`

## 终端设置代理

该终端下的网络指令都会根据这三个环境变量来决定是否走代理

注意区分大小写

`export http_proxy=http://localhost:7890`

`export https_proxy=https://localhost:7890`

`export ALL_PROXY=socks5://localhost:7891`

可能遇到的问题

- 开启代理后无法从github clone

报错：`curl: (35) OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to 127.0.0.1:7890`

解决方案：未知。。。

## curl查询公网出口ip

`curl ipecho.net/plain`

`curl ifconfig.me`

`curl ipinfo.io`

`curl www.trackip.net/ip`

`curl cip.cc`

## 更改主目录文件夹名为英文

```
sudo pacman -S xdg-user-dirs-gtk
export LANG=en_US
xdg-user-dirs-gtk-update
```

