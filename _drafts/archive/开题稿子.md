端到端的优势/传统非端到端的劣势：**计算成本**高，无法获取**全局信息**

基于传统的卷积神经网络的分割方法通常是：为了对一个像素分类，使用该像素周围的图像块作为网络的输入。这种方法有几个缺点：

**1、存储开销很大。**如果对每个像素使用的图像块的大小为15x15，则所需的存储空间为原来图像的225倍。

**2、计算效率低下。**因为相邻像素块重复，计算机需要做大量的重复计算，所以导致计算效率低下。

**3、感受野太小，无法获取全局信息。**通常像素块的大小比整幅图像小很多，因此算法只能提取一些局部的特征信息，从而导致分类的性能受到限制。

问题：

1. RGB-like是啥？可以引入空间信息？
2. 现有的引入空间信息的方法有哪些？
3. 

---

各位老师好

我的研究题目是基于深度学习的MRI脑组织分割算法，我的指导老师是栾晓老师

我将从这4个方面来介绍今天的内容

婴幼儿是一个很特殊的群体，他们可能会在大脑发育的早期，即一岁前，罹患一些神经发育性疾病，如自闭症、精神分裂症。然而这些疾病在3至4岁才会表现出明显的生理表现，错过最佳治疗时期。

因此，对婴幼儿大脑的发育进行早期评估就显得尤为重要。我们的目标就是，将婴幼儿大脑MR图像准确地分割为，灰质、白质、脑脊液，辅助医生进行一个早期诊断。

这个问题有存在如下难点：

1. 我们可以看到在右图中，第一行和第二行分别为t1和t2模态的MR图像，在婴儿一岁前的一个变化图。第三行为对应时期t1图像的灰度分布图，可以看到在6个月时期，灰质和白质的灰度值几乎完全重叠，导致极低的组织间对比度，也就增加了分割的难度，这个时期称为“等强度期”
2. 第二个难点在于，不同设备扫描层的厚度不同，导致一个部分容积效应的产生。我们可以看到，左边的蓝色框表示更厚的扫描厚度，导致在一张切片中平均了更多，结果就是图像会更模糊，边缘不清晰。
3. 以及随着，白质髓鞘形成引起的运动伪影

iseg2017是在MICCAI 2017提出的一个国际权威的婴幼儿大脑等强度期分割挑战赛，有公开的数据集可供下载。从iseg 2017共有21组队伍参赛，其中只有1组使用传统的基于图谱配准的方法，其余20组都采用了卷积神经网络，表明深度学习方法确实在精度方面比传统方法更有优势，其中有8组采用了基于unet的改进模型，也就在实践中证明了U-net架构的有效性。

早期将CNN用于图像分割 通常是通过这种基于图像块的预测方法，这种方法存在大量冗余计算，感受野也较小。随着2015年 FCN的提出，使得网络可以更好地完成端到端的分割任务。近几年的研究也大多使用基于FCN的方法。

这里先介绍2D的方法，经典方法主要就有FCN和U-net，都能实现端到端的图像语义分割，区别是U-Net有完整对称的编码解码路径，而FCN没有。医学图像分割任务中广泛使用的是U-Net结构。

由于大脑MR图像是3D图像，因此2D的方法无法获取到空间信息，导致其精度往往不如3D方法，V-Net是基于U-Net改进的3D方法，将2D卷积改为了3D卷积，并加入了残差连接。这同时也导致了更大的计算量，模型训练成本较高。

dice系数和haudoff距离是图像分割领域常用的了两种评价指标，分别用于衡量空间重叠度和分割边界的距离。

接下来介绍目前所作工作，实验1是复现了一个基于FCN架构多模态的分割网络，它的主要创新点是通过不同路径对不同模态进行特征提取，将同一层的不同模态的特征图融合，最后在上采样得到分割结果

实验2是基于2D U-Net的一个改进，我们知道3D医学图像存在3个轴面，横截面、冠状面和矢状面，2D网络的做法就是将其中一维作为batch size，利用深度学习的minibatch训练方法，实现对3D图像的训练，前面提到2D卷积无法提取图像的空间特征，导致分割精度不如3D网络，然而3D网络的训练成本又太高。因此我们的方法对图像的三个轴面分别进行卷积再融合，在引入空间信息的同时，也不会明显增加训练成本。我们通过3条路径对3个不同轴面进行特征提取，然后将同一层的特征图融合，对于深层特征图，由于下采样导致尺寸减小，我们就先进行上采样到原图大小，再旋转到同一轴面进行相加，最后下采样将特征图的大小还原，从而送入上采样路径进行拼接。

这是使用原始U-Net模型得到的分割错误的样例，我们可以看到错误主要集中在灰质和白质交界的部分，这就是由于等强度期灰度值重叠所造成的。因此，我们引入注意力加强网络对边缘的学习，我们在unet上采样路径的卷积操作之前加入了注意力模块，通过两次1x1卷积，得到一个单通道的注意力图，将am乘到输入图上，就可以看作是一个加权，使网络的学习更有目的性，最后加入一个残差连接，输出结果。受这篇文章的启发，引入对注意力的监督学习，我们构建了一个二值图像，其中灰质和白质的边界为1，其余为0。在loss中加入am与该二值图像的交叉熵损失，从而实现对注意力的监督学习。

接下来是我们的实验结果，我们在iseg2017上进行训练，数据集共有10个婴儿大脑，我们选用其中9个作为训练集，1个作为验证集，评估标准为dice系数，以2d unet作为一个对比标准，可以看到引入空间信息能够明显提升网络的性能，边缘注意力的实验目前还没有明显的提升，接下来打算继续改进一下注意力模块，以达到更好的效果。

接下来的我们就打算继续从空间信息和边缘问题入手，进一步提高网络的分割精度。